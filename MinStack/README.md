# LeetCode é¡Œè§£ç­†è¨˜ #155ï¼šMin Stackï¼ˆSwiftï¼‰

---

ğŸ“‚ é¡Œç›®åˆ†é¡

- é¡Œå‹ï¼šStack æ“ä½œã€è³‡æ–™çµæ§‹è¨­è¨ˆ
- é›£åº¦ï¼šEasy
- ç·´ç¿’é‡é»ï¼š
  - è¨­è¨ˆè‡ªè¨‚é¡åˆ¥çµæ§‹
  - ä½¿ç”¨ Stack æ¨¡æ“¬æœ€å°å€¼è¨˜éŒ„æ©Ÿåˆ¶
  - ç†è§£åŒæ­¥æ›´æ–°å…©å€‹ Stack çš„é‚è¼¯

---

## ğŸ“ é¡Œç›®é€£çµ  

[https://leetcode.com/problems/min-stack](https://leetcode.com/problems/min-stack)

---

## â“ é¡Œç›®èªªæ˜

è¨­è¨ˆä¸€å€‹æ”¯æ´ä»¥ä¸‹æ“ä½œçš„ Stack é¡åˆ¥ï¼š

- `push(x)`ï¼šå°‡å…ƒç´  x æ¨å…¥å †ç–Š
- `pop()`ï¼šç§»é™¤æœ€ä¸Šå±¤å…ƒç´ 
- `top()`ï¼šå–å¾—æœ€ä¸Šå±¤å…ƒç´ 
- `getMin()`ï¼šå–å¾—ç›®å‰å †ç–Šä¸­çš„æœ€å°å€¼

---

## âœ… ç¯„ä¾‹

```swift
è¼¸å…¥ï¼š
["MinStack","push","push","push","getMin","pop","top","getMin"]
[[],[-2],[0],[-3],[],[],[],[]]

è¼¸å‡ºï¼š
[null,null,null,null,-3,null,0,-2]
```

---

## ğŸ’¡ è§£æ³•ï¼šä½¿ç”¨å…©å€‹ Stack è¿½è¹¤æœ€å°å€¼

### 1â€“1 è§£æ³•æ€è·¯

1. ç‚ºäº†è®“ getMin() åœ¨ O(1) æ™‚é–“å…§å–å¾—æœ€å°å€¼ï¼Œå¯ä»¥ä½¿ç”¨å…©å€‹ Stackï¼š

| Stack åç¨± | åŠŸèƒ½èªªæ˜                             |
|------------|--------------------------------------|
| stack      | æ­£å¸¸å­˜æ”¾ push çš„å…ƒç´                   |
| minStack   | å­˜æ”¾ã€Œç›®å‰ç‚ºæ­¢çš„æœ€å°å€¼ã€ï¼Œèˆ‡ä¸» stack åŒæ­¥ |

---

### 1-2 æ“ä½œé‚è¼¯å¦‚ä¸‹ï¼š

- åˆ©ç”¨ minStack åŒæ­¥è¨˜éŒ„ç•¶å‰æœ€å°å€¼ï¼Œå°±èƒ½è®“ getMin() åœ¨ O(1) æ™‚é–“å…§å–å¾—æ­£ç¢ºçµæœï¼

| æ“ä½œæ–¹æ³•  | è¡Œç‚ºæè¿°                                                                 |
|-----------|--------------------------------------------------------------------------|
| push(x)   | - å°‡ `xå€¼` åŠ å…¥ `stack`<br>- è‹¥è©²`xå€¼`ç‚ºç›®å‰æœ€å°å€¼`ï¼ˆ<= minStack.topï¼‰`ï¼Œä¹ŸåŠ å…¥ `minStack`       |
| pop()     | - å¾ `stack` æ˜“é™¤æœ€ä¸Šå±¤å…ƒç´ <br>- è‹¥è©²å€¼ `== minStack.top`ï¼Œä¹Ÿä¸€ä½µå¾ `minStack` ç§»é™¤  |
| top()     | - å›å‚³ `stack` æœ€ä¸Šå±¤å…ƒç´ ï¼ˆå³ `.last`ï¼‰                                      |
| getMin()  | - å›å‚³ `minStack` æœ€ä¸Šå±¤å…ƒç´ ï¼ˆå³ç›®å‰æœ€å°å€¼ï¼‰                               |

---

### 1â€“3 ç¨‹å¼ç¢¼

```swift
// MARK: - å®šç¾© MinStack é¡åˆ¥
class MinStack {

    /// stack ç”¨ä¾†æ­£å¸¸ push / pop å…ƒç´ 
    private var stack: [Int] = []
    
    /// minStack ç”¨ä¾†è¿½è¹¤æ¯å€‹ç‹€æ…‹ä¸‹çš„æœ€å°å€¼
    private var minStack: [Int] = []

    /// åˆå§‹åŒ– MinStack
    init() { }
    
    /// æ¨å…¥å…ƒç´  `val`
    ///
    /// - å°‡ val åŠ å…¥ stack
    /// - è‹¥ val æ˜¯ç›®å‰ç‚ºæ­¢çš„æœ€å°å€¼ï¼Œä¹Ÿæ¨å…¥ minStack
    func push(_ val: Int) {
        
        /// 1.  æŠŠ val æ¨å…¥ä¸» stack
        stack.append(val)
        
        /// 2. æ›´æ–° minStack
        ///
        /// - å¦‚æœ minStack æ˜¯ç©ºçš„ï¼Œæˆ– val æ¯” minStack ç•¶å‰æœ€å°å€¼é‚„å°ï¼ˆå«ç­‰æ–¼ï¼‰â†’ åŠ å…¥ minStack
        /// (å› ç‚ºé€™ä»£è¡¨ val æ˜¯ç›®å‰ç‚ºæ­¢æœ€å°çš„å€¼ï¼‰
        if minStack.isEmpty || val <= minStack.last! {
            minStack.append(val)
        }
    }
    
    /// ç§»é™¤ stack æœ€ä¸Šå±¤å…ƒç´ ï¼Œä¸¦åŒæ­¥æ›´æ–° minStackï¼ˆå¦‚æœéœ€è¦ï¼‰
    ///
    /// - é€™è£¡ä½¿ç”¨ popLast()ï¼šæœƒå›å‚³ä¸¦ç§»é™¤æœ€å¾Œä¸€å€‹å…ƒç´ 
    /// - å¦‚æœ stack æ˜¯ç©ºçš„ï¼ŒpopLast() æœƒå›å‚³ nil â†’ ä½¿ç”¨ guard let å®‰å…¨è™•ç†
    /// - å¦‚æœå‰›å‰›ç§»é™¤çš„å…ƒç´  == ç•¶å‰æœ€å°å€¼ â†’ minStack ä¹Ÿè¦åŒæ­¥ç§»é™¤
    func pop() {
        
        /// å¾ stack æ‹¿å‡ºä¸¦ç§»é™¤æœ€å¾Œä¸€å€‹å…ƒç´ ï¼ˆæœ€ä¸Šå±¤çš„ï¼‰
        /// è‹¥ stack ç‚ºç©º â†’ returnï¼ˆä¸åšä»»ä½•æ“ä½œï¼Œé¿å…éŒ¯èª¤ï¼‰
        guard let top = stack.popLast() else { return }
        
        /// å¦‚æœé€™å€‹è¢«ç§»é™¤çš„å…ƒç´ ï¼Œå‰›å¥½ä¹Ÿæ˜¯ minStack æœ€ä¸Šå±¤ï¼ˆç›®å‰æœ€å°å€¼ï¼‰
        /// â†’ ä»£è¡¨æˆ‘å€‘ä¹Ÿè¦å¾ minStack æŠŠå®ƒç§»é™¤ï¼Œç¢ºä¿æœ€å°å€¼è³‡è¨Šæ­£ç¢º
        if top == minStack.last {
            minStack.popLast()
        }
    }
    
    /// å–å¾—ç›®å‰ Stack æœ€ä¸Šå±¤çš„å…ƒç´ 
    ///
    /// - å›å‚³ç›®å‰ stack æœ€ä¸Šå±¤çš„å…ƒç´ 
    /// - è‹¥ stack ç‚ºç©ºï¼Œé€™è£¡æš«æ™‚å›å‚³ -1ï¼ˆLeetCode é¡Œç›®é€šå¸¸ä¿è­‰æ“ä½œåˆæ³•ï¼‰
    func top() -> Int {
        return stack.last ?? -1
    }
    
    /// å–å¾—ç›®å‰ Stack çš„æœ€å°å€¼
    ///
    /// - `minStack` è¨˜éŒ„äº†æ‰€æœ‰ç‹€æ…‹ä¸‹çš„æœ€å°å€¼
    /// - ç›´æ¥å– `.last `å°±æ˜¯ç›®å‰æœ€å°å€¼
    /// - åŒæ¨£ï¼Œç‚ºä¿éšªåŠ å€‹ ?? -1ï¼ˆé›–ç„¶é¡Œç›®ä¿è­‰æœƒåˆæ³•å‘¼å«ï¼‰
    func getMin() -> Int {
        return minStack.last ?? -1
    }
     
}
```

---

### 1â€“4 æ¸¬è©¦ç¯„ä¾‹

```swift
let minStackOne = MinStack()

minStackOne.push(-2)
minStackOne.push(0)
minStackOne.push(-3)
print(minStackOne.getMin()) // âœ -3

minStackOne.pop()
print(minStackOne.top())    // âœ 0
print(minStackOne.getMin()) // âœ -2
```
---

### 1-5 å°æ‡‰æµç¨‹åœ–è§£

| æ“ä½œ         | `stack`         | `minStack`      | èªªæ˜                          |
|--------------|------------------|------------------|-------------------------------|
| push(-2)     | [-2]             | [-2]             | åˆå§‹å€¼ï¼ŒåŒæ­¥æ¨å…¥ minStack     |
| push(0)      | [-2, 0]          | [-2]             | 0 > minStack.topï¼Œä¸åŠ å…¥      |
| push(-3)     | [-2, 0, -3]      | [-2, -3]         | -3 æ˜¯æ–°æœ€å°å€¼ â†’ æ¨å…¥ minStack |
| getMin()     | -                | [-2, -3]         | æŸ¥çœ‹ç›®å‰æœ€å°å€¼ï¼š-3            |
| pop()        | [-2, 0]          | [-2]             | -3 æ˜¯æœ€å°å€¼ â†’ å…©é‚Šéƒ½ç§»é™¤     |
| top()        | 0                | [-2]             | å–å¾— stack æœ€ä¸Šå±¤å…ƒç´         |
| getMin()     | -                | [-2]             | å–å¾—ç•¶å‰æœ€å°å€¼                |

---

### 1-6 èªæ³•è¤‡ç¿’

| èªæ³•                    | èªªæ˜                                                                 |
|-------------------------|----------------------------------------------------------------------|
| `var arr: [Int] = []`   | å®£å‘Šä¸€å€‹æ•´æ•¸é™£åˆ—ï¼Œé è¨­ç‚ºç©º                                            |
| `arr.append(x)`         | å°‡å…ƒç´  x åŠ å…¥é™£åˆ—å°¾ç«¯ï¼ˆStack æ¨å…¥ï¼‰                                  |
| `arr.popLast()`         | ç§»é™¤ä¸¦å›å‚³é™£åˆ—æœ€å¾Œä¸€å€‹å…ƒç´ ï¼Œè‹¥ç‚ºç©ºå‰‡å›å‚³ nilï¼ˆStack å½ˆå‡ºï¼‰           |
| `arr.last`              | å–å¾—é™£åˆ—æœ€å¾Œä¸€å€‹å…ƒç´ ï¼Œä½†ä¸æœƒç§»é™¤ï¼Œç‚º Optional å‹åˆ¥                   |
| `guard let x = ...`     | å®‰å…¨æ‹†è§£ Optionalï¼Œè‹¥ç‚º nil å‰‡æå‰ returnï¼Œå¸¸è¦‹æ–¼é˜²å‘†è™•ç†            |
| `?? -1`                 | ä½¿ç”¨ nil åˆä½µé‹ç®—ç¬¦ï¼Œè‹¥å€¼ç‚º nil å‰‡çµ¦é è¨­å€¼ï¼Œé¿å…å´©æ½°                 |
| `private` ä¿®é£¾è©        | å°‡å±¬æ€§è¨­ç‚ºç§æœ‰ï¼Œåƒ…åœ¨è©²é¡åˆ¥ä¸­ä½¿ç”¨ï¼Œç¬¦åˆå°è£æ€§è¨­è¨ˆåŸå‰‡                |

---

âœ… è£œå……èªªæ˜

1. `stack.popLast()` ç‚º Swift å®‰å…¨çš„é™£åˆ—å½ˆå‡ºæ–¹æ³•ï¼Œæ­é… guard let ä½¿ç”¨é¿å…ç©ºé™£åˆ—éŒ¯èª¤ã€‚

2. `stack.last` ä¸æœƒç§»é™¤å…ƒç´ ï¼Œé©åˆç”¨ä¾†æª¢æŸ¥ Stack é ‚ç«¯çš„å€¼ã€‚

3. `minStack.last ?? -1` æ˜¯ä¸€ç¨®é˜²å®ˆå¼å¯«æ³•ï¼Œå³ä½¿é¡Œç›®ä¿è­‰åˆæ³•å‘¼å«ï¼Œä»ä¿æŒç©©å®šæ€§ã€‚

---

### 1â€“7 popLast() çš„ç”¨é€”ï¼Œç‚ºä»€éº¼æ­é… guard let ä½¿ç”¨ï¼Ÿ

#### `popLast()` çš„å…©å¤§åŠŸèƒ½ï¼š

| å‹•ä½œ     | èªªæ˜                                                   |
|----------|--------------------------------------------------------|
| å–å¾—å€¼   | å›å‚³é™£åˆ—æœ€å¾Œä¸€å€‹å…ƒç´ ï¼ˆOptional å‹åˆ¥ï¼‰                  |
| ç§»é™¤å€¼   | åŒæ™‚æŠŠé€™å€‹å…ƒç´ å¾é™£åˆ—ä¸­ã€Œç§»é™¤æ‰ã€                        |

---

#### é€™è¡Œç¨‹å¼ç¢¼ï¼š

```swift
guard let top = stack.popLast() else { return }
```

æ˜¯åœ¨åšå…©ä»¶äº‹ åˆä½µæˆä¸€æ­¥ï¼š

1. å¾ `stack` ä¸­ç§»é™¤ä¸¦å–å¾—æœ€å¾Œä¸€å€‹å…ƒç´ ï¼ˆä¹Ÿå°±æ˜¯ Stack æœ€ä¸Šå±¤ï¼‰
2. å¦‚æœ `stack` æ˜¯ç©ºçš„ï¼Œç›´æ¥ returnï¼Œä¸åŸ·è¡Œå¾ŒçºŒé‚è¼¯

---

#### å°ç¯„ä¾‹ï¼š

```swift
var stack = [1, 2, 3]

guard let top = stack.popLast() else { return }

print(top)      // âœ 3
print(stack)    // âœ [1, 2]
```

- å¦‚æœ stack æ˜¯ç©ºçš„ï¼Œé€™æ®µç¨‹å¼ç¢¼å°±æœƒè·³éå¾ŒçºŒé‚è¼¯ï¼Œä¸æœƒå´©æ½°ã€‚

---

#### æ›´å‚³çµ±çš„å¯«æ³•ï¼ˆå°ç…§ï¼‰

```swift
if stack.isEmpty {
    return
}
let top = stack.removeLast()
```

- åŠŸèƒ½ä¸€æ¨£ï¼Œä½†å¯«æ³•è¼ƒé•·ã€‚Swift æ›´æ¨è–¦ä½¿ç”¨ popLast() æ­é… guard letï¼Œæ›´ Swiftyã€ç°¡æ½”ã€å®‰å…¨ã€‚

---

#### âœ… ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆåœ¨ MinStack å¾ˆå¯¦ç”¨ï¼Ÿ

åœ¨ pop() æ–¹æ³•ä¸­ï¼Œæˆ‘å€‘å¸Œæœ›ï¼š

1. å¾ stack æ‹¿å‡ºå…ƒç´ 
2. è‹¥å®ƒæ˜¯æœ€å°å€¼ â†’ ä¸€èµ·å¾ minStack ç§»é™¤

```swift
guard let top = stack.popLast() else { return }

if top == minStack.last {
    minStack.popLast()
}
```

ä¸€æ¬¡å®Œæˆï¼š

1. å®‰å…¨ç§»é™¤
2. åŒæ­¥æœ€å°å€¼æ›´æ–°

---
## æ¸¬è©¦äºŒï¼ˆé‡è¤‡æœ€å°å€¼çš„æƒ…æ³ï¼‰

```swift
["MinStack","push","push","push","push","getMin","pop","getMin","pop","getMin","pop","getMin"]
[[],[5],[3],[3],[7],[],[],[],[],[],[],[]]
```

### 2-1 å»¶ä¼¸æ¸¬è©¦èˆ‡åœ–è§£ï¼šé‡è¤‡æœ€å°å€¼çš„æƒ…æ³

```swift
let minStackTwo = MinStack()

minStackTwo.push(5)
minStackTwo.push(3)
minStackTwo.push(3)
minStackTwo.push(7)
print(minStackTwo.getMin())  // âœ 3

minStackTwo.pop()            // ç§»é™¤ 7
print(minStackTwo.getMin())  // âœ 3

minStackTwo.pop()            // ç§»é™¤ä¸€å€‹ 3
print(minStackTwo.getMin())  // âœ 3 â† å¦ä¸€å€‹ 3 é‚„åœ¨

minStackTwo.pop()            // ç§»é™¤æœ€å¾Œä¸€å€‹ 3
print(minStackTwo.getMin())  // âœ 5 â† å›åˆ°å…ˆå‰çš„æœ€å°å€¼
```

---

### 2-2 å°æ‡‰æµç¨‹åœ–è§£

| æ“ä½œ       | stack         | minStack      | èªªæ˜                                 |
|------------|---------------|---------------|--------------------------------------|
| push(5)    | [5]           | [5]           | åˆå§‹å€¼ï¼ŒåŒæ­¥æ¨å…¥ minStack             |
| push(3)    | [5, 3]        | [5, 3]        | 3 < 5 â†’ æ¨å…¥ minStack                |
| push(3)    | [5, 3, 3]     | [5, 3, 3]     | å†æ¬¡æ¨å…¥ 3ï¼Œä»æ˜¯æœ€å° â†’ ä¸€èµ·è¨˜éŒ„      |
| push(7)    | [5, 3, 3, 7]  | [5, 3, 3]     | 7 > min â†’ åƒ…å…¥ä¸» stack               |
| getMin()   | -             | [5, 3, 3]     | ç›®å‰æœ€å°ç‚º 3                          |
| pop()      | [5, 3, 3]     | [5, 3, 3]     | ç§»é™¤ 7ï¼Œä¸å½±éŸ¿ minStack              |
| getMin()   | -             | [5, 3, 3]     | ä»æ˜¯ 3                               |
| pop()      | [5, 3]        | [5, 3]        | ç§»é™¤ä¸€å€‹ 3ï¼Œé‚„æœ‰ä¸€å€‹ä¿ç•™             |
| getMin()   | -             | [5, 3]        | é‚„æ˜¯ 3                               |
| pop()      | [5]           | [5]           | ç§»é™¤æœ€å¾Œä¸€å€‹ 3ï¼Œmin è®Šç‚º 5           |
| getMin()   | -             | [5]           | âœ… æˆåŠŸé‚„åŸå…ˆå‰æœ€å°å€¼                |

---

ğŸ“‚ å›åˆ°ä¸»ç›®éŒ„ï¼š[è¿”å› LeetCode é¡Œè§£ç¸½è¡¨](../README.md)